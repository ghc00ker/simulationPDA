# Project 2：PDA

## 实验描述
你需要用 C++ 实现⼀个 Linux 下运行的命令行工具 `pda`，模拟 **确定性下推自动机(DPDA)** 的行为。

### 任务
1. **解析与模拟**
   - PDA 的形式化定义及其语法见附录，以文件方式读入，文件带有 `.pda` 后缀
   - 你的程序应命名为 `pda`。在命令行中运行时，传入 PDA 与输入字符串，需要对其进行解析、模拟，最后输出结果至 stdout
      - 首先判断输入串的合法性 (也即判断所有字符是否均属于 **输入符号集**，见附录），若不合法，需输出 `illegal input` 至 stdout
      - 判定输入字符串经过模拟后是否能到达终止状态(被接收)，输出 `true` 或 `false`
   - 模拟目录里提供的 `anbn.pda` 文件，应当出现：
      ```shell
      $ ./bin/pda anbn.pda aaabbb
      true
      $ ./bin/pda anbn.pda aabbb
      false
      $ ./bin/pda anbn.pda aabbbc
      illegal input
      ```
> 与实验一相同，请使用相对路径、只读模式读取文件；
> 此外，我们保证测试的 PDA 文件符合语法，所有 PDA 均为确定性下推动机(DPDA)，且必须以 **终态接受**
> 关于 DPDA 的定义，参考课件或教材

2. **构造 DPDA 程序**
   - 实现 DPDA 程序判定括号匹配
      - 字符串输入应只含半角字符的小括号：`(`,`)`
      - 如果满足括号匹配，输出 `true`，否则输出 `false`
   - 将文件命名为`case.pda`，并参考最终实验提交格式进行提交
   - 示例
      ```shell
      $ ./bin/pda case.pda ()(a)(())
      illegal input
      $ ./bin/pda case.pda ((()))
      true
      $ ./bin/pda case.pda (()(())))
      false
      $ ./bin/pda case.pda (()()())
      true
      ```

3. **注意事项**
   - 任务 2 中括号为特殊字符，我们在测试时会加引号保证输入有效，即 `./bin/pda case.pda "((()))"`
   - 所有测试中的输入串可能为空串，以 `""` 传递，例如
      ```shell
      $ ./bin/pda case.pda ""
      true
      ```

### 补充
1. **编程语言**：仅支持 C++ 语言，详细信息参考 `README.md`
2. **操作系统**：请使用 Linux 系统 (如果你之前没接触过 Linux 系统，WSL2 足够完成本课程所有编程任务，推荐使用)，我们不支持 Windows 系统测试，详细信息参考 `README.md`
3. **用户友好**：你的命令行工具被相关测试脚本调用，请 **不要** 在 stdout 或 stderr 中打印额外的信息 (如调试信息、日志)，并确保 stdout 仅输出一行运行结果。**不要** 在当前目录产生多余的临时文件

​	
## 实验提交
> 重要声明：为维护学术诚信，我们将对所有提交代码进行查重！请各位同学务必独立完成本项目！

- 上传
  - 请将压缩包命名为 `学号_姓名_FLA25proj2.zip` 上传至 https://box.nju.edu.cn/u/d/f6e635c6f64f45f897c5/
  - 压缩包的 **具体格式** 要求参考 `README.md`，**请仔细阅读其中的要求**
- 联系
  - 实验相关问题请优先联系群聊里的钱子隽与仓世鸿助教

<font size = 5> 提交截止日期：`2025.12.8 23:59:59` </font>


---
## 附录 PDA (`.pda` 文件)语法
PDA 的形式化描述为 $P = (Q, \Sigma, \Gamma, \delta, q_0, z_0, F)$。下面定义的程序语法完整地刻画了这七部分内容。

1. **状态集 Q**: 以 `#Q` 开头。**占据（且仅占据）PDA 程序的一行**（即不包括回车换行)， `#` 为该行的第一个字符（以下 2 - 6 同）；各状态之间以英文逗号 `','` 分隔。状态用一个或多个非空白字符（字母 `a-z` ， `A-Z` 、数字 `0-9` 和下划线 `_` ）表示，如 `10`、`a`、`state1` 等。语法格式为 `#Q = {q1,q2,...,qi}`。等号 `=` 两边各有一个空格（以下 2 - 6 同）。
   示例：
   ```
   #Q = {0,cp,q,q1,accept,accept2,reject}
   ```

2. **输入符号集 $\Sigma$**: 以 `#S` 开头。各符号之间以英文逗号 `','` 分隔。语法格式为 `#S = {s1,s2,...,sj}`。输入符号的可取值范围为除 `' ' (space)`、`','`、`';'`、`'{'`、`'}'`、`'*'`、`'_'` 外的所有 **ASCII 可显示字符** (定义参见 ***[维基百科](https://zh.wikipedia.org/wiki/ASCII )***)。规定 `'_'` 表示 **空** $ε$，仅在转移函数时考虑。
   示例：
   ```
   #S = {0,1,a,b}
   ```

3. **栈符号集 $\Gamma$**：以 `#G` 开头。各符号之间以英文逗号 `','` 分隔。语法格式为 `#G = {g1,g2,...,gj}`。栈符号的可取值范围为除 `' ' (space)`、`','`、`';'`、`'{'`、`'}'`、`'*'` 、`'_'` 外的所有 **ASCII 可显示字符**。规定 `'_'` 表示 **空** $ε$，仅在转移函数时考虑。
   示例：
   ```plain
   #G = {0,1,z,X,Z}
   ```

4. **初始状态 $q_0$**: 以 `#q0` 开头。语法格式为 `#q0 = q`。
   示例：
   ```
   #q0 = 0
   ```

5. **栈起始符号 $z_0$**：以 `#z0` 开头。语法格式为 `#z0 = z`。起始符号默认不为空。
   示例：
   ```plain
   #z0 = z
   ```

6. **终结状态集 F**: 以 `#F` 开头。各状态之间以英文逗号 `','` 分隔。语法格式为 `#F = {f1,f2,...,fn}`。
   示例：
   ```
   #F = {accept}
   ```

7. **转移函数 $\delta$**: 占用 (且仅占用) 一行，行内容为一个五元组，格式为：`<旧状态> <输入符号> <旧栈顶符号> <新状态> <替换序列>`。元组各部分之间以一个空格分隔。
   - **(新、旧) 状态** 定义见状态集。
   - **输入符号** 定义见输入符号集。
      - 注：转移函数里的输入符号可能为 **空**，但其不在输入符号集里显式表示
   - **旧栈顶符号** 定义见栈符号集。
      - 注：我们的测试 **不考虑** 旧栈顶符号为 **空** 的情况。同理，你的设计也不要出现这样的情况。
   - **替换序列** 由若干个栈符号集的符号组成。规定栈底在 **右** 。
      - 注：替换序列可能为 **空**
   - 示例
      ```plain
      q 0 Z q1 XXZ; 当前处于状态 q
                  ; 当前输入为 0
                  ; 当前栈顶字符为 Z
                  ; 下一个状态为 q1
                  ; 替换序列（当前新的栈顶字符为 X)
                        
      q _ Z q1 XXZ; 输入为空
      q _ Z q1 _;弹出栈顶元素
      ```

8. **注释和空行**: 注释以英文分号 `';'` 开头。在解析程序时应当忽略注释和空行。
   示例：
   ```
   ;这是一行注释，下面是空行。你在解析时应忽略注释和空行。
   
   #Q = {s0, s1};这也是注释
   ```

> 完整程序示例参见 `anbn.pda`